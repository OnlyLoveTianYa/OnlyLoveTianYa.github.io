---
layout: post
title:  谈谈计算内的补码与Java基本类型的存储格式
date:   2017-07-09 9:03:00 +0800
categories: 补码和存储
---

* content
{:toc}


##前言
====================================
`终于毕业了，毕业就是失业啊,现在在成都这边找工作，如果有同行有推荐就很好了，我的简历在关于作者中。`

#什么是补码?计算机为什么要使用补码来存储数据？
====================================
话说又是面试碰到了问题，关于Java与操作的题目是`8$9`
因为对原码补码的转换以及Java数据类型的存储位数有点模糊，回来就复习了一波，发现补码的设计确实很精妙。

说到什么是补码我觉得先要了解“模”的概念，“模”是指一个计量系统的计数范围。如时钟等。计算机也可以看成一个计量机器，它也有一个计量范围，即都存在一个“模”。

例如：
时钟的计量范围是0～11，模=12。
表示n位的计算机计量范围是0～2(n)-1，模=2（n）。【注：n表示指数】
“模”实质上是计量器产生“溢出”的量，它的值在计量器上表示不出来，计量器上只能表示出模的
余数。任何有模的计量器，均可化减法为加法运算。
例如： 假设当前时针指向10点，而准确时间是6点，调整时间可有以下两种拨法：


一种是倒拨4小时，即：10-4=6
另一种是顺拨8小时：10+8=12+6=6
在以12模的系统中，加8和减4效果是一样的，因此凡是减4运算，都可以用加8来代替。


对“模”而言，8和4互为补数。实际上以12模的系统中，11和1，10和2，9和3，7和5，6和6都有这个特
性。共同的特点是两者相加等于模。


对于计算机，其概念和方法完全一样。n位计算机，设n=8， 所能表示的最大数是11111111，若再
加1称为100000000(9位)，但因只有8位，最高位1自然丢失。又回了00000000，所以8位二进制系统的
模为2(8)。 在这样的系统中减法问题也可以化成加法问题，只需把减数用相应的补数表示就可以
了。把补数用到计算机对数的处理上，就是补码。


在这个概念中我们知道了补码的是通过模的概念延伸出来的，也知道了计算机使用补码的好处有哪些？

1、补码可以把减法当成加法运算

2、补码可以将符号位也参与运算，不用单独处理

3、补码能比原码多表示一位数，因为补码只有一个0，而原码有+0和-0


#补码与原码如何转换？
====================================

* 原码转补码

正数的补码、原码、反码都是其自身 

例Java Byte类型的7用二进制原、反、补码就是0000 0111 

负数的补码是原码数值取反加一 四字口诀（数反加一）

-7的原码是1000 0111

补码1111 1001

* 补码转原码

1、逆运算，减一数值位取反（这种方法很容易想到）


2、和原码转补码一样 数值取反加一（很神奇是不是）

为什么原码转补码要加一，这个一就是因为补码可以比原码是多表示一位数补码只有一个0


#取模与取余的区别？
====================================
这里延伸一下吧，取模和取余有啥区别？是不是感觉是差不多的东西？我之前也是这样认为的。

对于两个正数来说结果是没有区别的

但是如果是负数就不同了

1.求 整数商： c = a/b;

2.计算模或者余数： r = a - c*b.

求模运算和求余运算在第一步不同: 取余运算在取c的值时，向0 方向舍入(fix()函数)；而取模运算在计算c的值时，向负无穷方向舍入(floor()函数

例如：计算-7 Mod 4
那么：a = -7；b = 4；
第一步：求整数商c，如进行求模运算c = -2（向负无穷方向舍入），求余c = -1（向0方向舍入）

第二步：计算模和余数的公式相同，但因c的值不同，求模时r = 1，求余时r = -3。

归纳：当a和b符号一致时，求模运算和求余运算所得的c的值一致，因此结果一致。
当符号不一致时，结果不一样。求模运算结果的符号和b一致，求余运算结果的符号和a一致。

#Java数据基本类型的存储字节长
====================================
* int 4个字节 总共32位
* long 8个字节 总共64位
* short 2个字节 总共16位
* byte 1个字节 总共8位
* float 4个字节 总共32位
* double 8个字节 总共64位(float和double不能计算精确值，所以一般用于存储测量数据之类非精确数值，不用于商业运算，商业运算用BigDecimal)
* char 2个字节 总共16位(因为Java采取unicode)
